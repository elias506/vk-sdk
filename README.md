# VK-SDK
[![Go Report Card](https://goreportcard.com/badge/github.com/elias506/vk-sdk)](https://goreportcard.com/report/github.com/elias506/vk-sdk)
![GitHub release (latest by date including pre-releases)](https://img.shields.io/github/v/release/elias506/vk-sdk?display_name=tag&include_prereleases)
[![Contributors](https://img.shields.io/github/contributors/elias506/vk-sdk)](https://img.shields.io/github/contributors-anon/elias506/vk-sdk)
[![Go Reference](https://pkg.go.dev/badge/github.com/elias506/vk-sdk.svg)](https://pkg.go.dev/github.com/elias506/vk-sdk)
[![License](https://img.shields.io/github/license/elias506/vk-sdk)](https://img.shields.io/github/license/elias506/vk-sdk)

Package vk-sdk provides a **full generated** development kit to work 
with [VKontakte API](https://dev.vk.com/method). The lack of reflection and using 
[easyjson](https://github.com/mailru/easyjson) for objects represents a powerful performance.
**All** methods, error codes, objects and responses with provided descriptions are included.

Code was generated by using [fork](github.com/elias506/vk-api-schema) from official 
[vk-api-schema](https://github.com/VKCOM/vk-api-schema). In other words, the package
is easy to maintain and can be comfortably used by consumers because of its comprehensive documentation.

### Contributing
We are welcome to new participants of the project. Feel free to create a 
[bug](https://github.com/elias506/vk-sdk/issues/new?assignees=elias506&labels=bug&template=bug_report.md&title=) 
or [enhancement](https://github.com/elias506/vk-sdk/issues/new?assignees=elias506&labels=enhancement&template=feature_request.md&title=) 
issue and new [pull request](https://github.com/elias506/vk-sdk/pulls).

## Get started
### Install:
```sh
go get github.com/elias506/vk-sdk
```

## Examples
Look for full in `vk-sdk/example/example.go`:

**Get friends in online:**
```go
    // Get new client instants
    vk := vk_sdk.NewVK(http.DefaultClient)
    
    // Set your token
    vk.SetToken(<your_token>) 
    
    // Get your online friend IDs
    req := vk_sdk.Friends_GetOnline_Request{}
    
    resp, apiErr, err := vk.Friends_GetOnline(context.Background(), req, vk_sdk.TestMode())

    if err != nil || apiErr != nil {
        log.Fatal()
    }

    fmt.Println("Online friends IDs:", resp.Response) 
```

**Use Implicit/AuthCode flows to auth:**
```go
    // Build auth request
    authReq := vk_sdk.ImplicitFlowUserRequest{
        ClientID:    "<your_id>", 
        //RedirectURI: "",
        //Display:     nil,
        //Scope:       nil,
        //State:       nil,
        //Revoke:      false,
    }

    // get redirect url for user
    redirectURL := vk_sdk.GetAuthRedirectURL(authReq)
    
    // wait user redirect... 
    
    // get token from redirect url 
    token, oAuthErr, err := vk_sdk.GetImplicitFlowUserToken(<user_url>)

    if err != nil || oAuthErr != nil {
        log.Fatal()
    }
```

## Main idea
`vk-sdk` aims to be user-friendly due to the completeness of the generated code 
and descriptions, and at the same time to show good executed speed. 
This package reduces the amount of appeals to official API documentation for validating your request/response structure.
Just use right method. Right here.

In addition, code generation allows SDK developers to focus on improving 
user experience and performance rather than fixing bugs and write large commits. 
Any code change can be submitted and updated in all places just within a few seconds.

## Benchmarks
`go-vk-api/vk` use simple fields mapping without composition by method and execute with from-the-box speed.
In turn `SevereCloud/vksdk` use `reflect` package to add input data to request.

| lib                         | req/resp size | count       |  ns/op |    B/op | allocs/op |
|:----------------------------|:--------------|-------------|-------:|--------:|----------:|
| vk-sdk                      | medium        | 220738      |   5435 |    9064 |        60 |
| SevereCloud/vksdk           | medium        | 127970      |   9342 |   16165 |       117 |
| go-vk-api/vk                | medium        | 220962      |   5543 |    8787 |        64 |
| vk-sdk                      | small         | 406672      |   2981 |    3424 |        44 |
| SevereCloud/vksdk           | small         | 271036      |   4420 |    5126 |        65 |
| go-vk-api/vk                | small         | 467112      |   2506 |    3129 |        41 |
