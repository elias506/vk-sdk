# VK-SDK
[![Go Report Card](https://goreportcard.com/badge/github.com/elias506/vk-sdk)](https://goreportcard.com/report/github.com/elias506/vk-sdk)
[![Go Reference](https://pkg.go.dev/badge/github.com/elias506/vk-sdk.svg)](https://pkg.go.dev/github.com/elias506/vk-sdk)
[![Gen Coverage](https://img.shields.io/badge/gen%20coverage-98.2%25-blue)](https://img.shields.io/badge/gen%20coverage-98.2%25-blue)
[![License](https://img.shields.io/github/license/elias506/vk-sdk)](https://img.shields.io/github/license/elias506/vk-sdk)

Package vk-sdk provides a **full generated** development kit to work 
with [VKontakte API](https://dev.vk.com/method). The lack of reflection and using [easyjson](https://github.com/mailru/easyjson) for objects represents a powerful speed performance.
Include **all** methods, error codes, objects and responses with provided descriptions.

Code generated by using [fork](github.com/elias506/vk-api-schema) from 
official [vk-api-schema](https://github.com/VKCOM/vk-api-schema). This means the package
is easy to maintain it and comfortably use by consumers with exhaustive documentation.

## Get started
### Install:
```sh
go get github.com/elias506/vk-sdk
```

## Examples
Look for full in `vk-sdk/example/example.go`:

**Get friends in online:**
```go
    // Get new client instants
    vk := vk_sdk.NewVK(http.DefaultClient)
    
    // Set your token
    vk.SetToken(<your_token>) 
    
    // Get your online friend IDs
    req := vk_sdk.Friends_GetOnline_Request{}
    
    resp, apiErr, err := vk.Friends_GetOnline(context.Background(), req, vk_sdk.TestMode())

    if err != nil || apiErr != nil {
        log.Fatal()
    }

    fmt.Println("Online friends IDs:", resp.Response) 
```

**Use Implicit/AuthCode flows to auth:**
```go
    // Build auth request
    authReq := vk_sdk.ImplicitFlowUserRequest{
        ClientID:    "<your_id>", 
        //RedirectURI: "",
        //Display:     nil,
        //Scope:       nil,
        //State:       nil,
        //Revoke:      false,
    }

    // get redirect url for user
    redirectURL := vk_sdk.GetAuthRedirectURL(authReq)
    
    // wait user redirect... 
    
    // get token from redirect url 
    token, oAuthErr, err := vk_sdk.GetImplicitFlowUserToken(<user_url>)

    if err != nil || apiErr != nil {
        log.Fatal()
    }
```

## Main idea
`vk-sdk` aims to be user-friendly by the completeness of the generated code 
and description, and at the same time to show good executed speed. There is much 
more cases not to go to official API documentation and check your request/response structure. 
Just use right method. Right here.

Simultaneously code generation allows SDK developers to focus on improving 
user experience and performance rather than fixing bugs and constantly 
updating the codebase. Any code change can be submitted and updated in 
all places in just a few seconds.

## Benchmarks
`go-vk-api/vk` use simple fields mapping without compose by method and execute with from-the-box speed.
In turn `SevereCloud/vksdk` use `reflect` package to add input data to request.

| lib                         | req/resp size | count       |  ns/op |    B/op | allocs/op |
|:----------------------------|:--------------|-------------|-------:|--------:|----------:|
| vk-sdk                      | medium        | 220738      |   5435 |    9064 |        60 |
| SevereCloud/vksdk           | medium        | 127970      |   9342 |   16165 |       117 |
| go-vk-api/vk                | medium        | 220962      |   5543 |    8787 |        64 |
|                             |               |             |        |         |           |
| vk-sdk                      | small         | 406672      |   2981 |    3424 |        44 |
| SevereCloud/vksdk           | small         | 271036      |   4420 |    5126 |        65 |
| go-vk-api/vk                | small         | 467112      |   2506 |    3129 |        41 |
